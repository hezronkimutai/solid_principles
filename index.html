<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLID Principles</title>
    <!-- Load libraries -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        // Initialize everything when the document is ready
        // Initialize mermaid configuration
        mermaid.initialize({
            startOnLoad: false,
            theme: 'dark',
            securityLevel: 'loose',
            themeVariables: {
                primaryColor: '#661A25',
                primaryTextColor: '#fff',
                primaryBorderColor: '#872341',
                lineColor: '#E17564',
                secondaryColor: '#4D1425',
                tertiaryColor: '#09122C',
                textColor: '#E17564',
                mainBkg: '#09122C',
                nodeBorder: '#872341',
                clusterBkg: 'rgba(135, 35, 65, 0.15)',
                titleColor: '#fff',
                edgeLabelBackground: '#09122C',
                nodeTextColor: '#fff',
                labelBackgroundColor: '#09122C',
                classText: '#fff',
                noteBackgroundColor: '#BE3144',
                noteBorderColor: '#872341',
                errorBkgColor: '#661A25',
                errorTextColor: '#fff',
                warningBkgColor: '#8B4513',
                warningTextColor: '#fff',
                successBkgColor: '#1B4D3E',
                successTextColor: '#fff'
            }
        });

        // Configure marked to handle code blocks
        marked.use({
            renderer: {
                code(code, language) {
                    if (language === 'mermaid') {
                        return `<div class="mermaid">${code}</div>`;
                    }
                    return `<pre><code class="language-${language}">${code}</code></pre>`;
                }
            }
        });
    </script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            color: #fff;
            background: #09122C;
        }
        nav {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(135, 35, 65, 0.15);
            border-radius: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        nav button {
            padding: 0.75rem 1.25rem;
            border: none;
            background: #BE3144;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }
        nav button:hover {
            background: #E17564;
            transform: translateY(-1px);
        }
        nav button.active {
            background: #872341;
        }
        #content {
            background: rgba(135, 35, 65, 0.1);
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        pre {
            background: rgba(9, 18, 44, 0.8);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            border: 1px solid #BE3144;
        }
        code {
            font-family: 'Consolas', monospace;
            color: #fff;
        }
        h1, h2, h3 {
            color: #E17564;
            margin-top: 2rem;
        }
        h1 {
            border-bottom: 2px solid #872341;
            padding-bottom: 0.5rem;
        }
        .mermaid {
            background: rgba(9, 18, 44, 0.8);
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            text-align: center;
        }
        blockquote {
            border-left: 4px solid #BE3144;
            margin: 1.5rem 0;
            padding: 0.5rem 1rem;
            background: rgba(9, 18, 44, 0.8);
            font-style: italic;
        }
        ul, ol {
            padding-left: 2rem;
        }
        p {
            margin: 1rem 0;
            color: #fff;
        }
        strong {
            color: #E17564;
        }
        a {
            color: #BE3144;
            text-decoration: none;
            transition: color 0.2s;
        }
        a:hover {
            color: #E17564;
            text-decoration: underline;
        }
        /* Hide Mermaid error messages */
        .mermaid:not(:has(svg)) {
            display: none;
        }
    </style>
</head>
<body>
    <nav id="nav">
        <button onclick="displayPrinciple('home')" data-principle="home">Home</button>
        <button onclick="displayPrinciple('srp')" data-principle="srp">Single Responsibility</button>
        <button onclick="displayPrinciple('ocp')" data-principle="ocp">Open-Closed</button>
        <button onclick="displayPrinciple('lsp')" data-principle="lsp">Liskov Substitution</button>
        <button onclick="displayPrinciple('isp')" data-principle="isp">Interface Segregation</button>
        <button onclick="displayPrinciple('dip')" data-principle="dip">Dependency Inversion</button>
    </nav>
    <div id="content">
        <p>Select a SOLID principle from the navigation above to view its documentation.</p>
    </div>

    <script>
        // Get markdown content from files
        const principles = {};
        
        async function loadPrinciples() {
            try {
                const responses = await Promise.all([
                    fetch('README.md'),
                    fetch('SRP/README.md'),
                    fetch('OCP/README.md'),
                    fetch('LSP/README.md'),
                    fetch('ISP/README.md'),
                    fetch('DIP/README.md')
                ]);
                
                const [home, srp, ocp, lsp, isp, dip] = await Promise.all(
                    responses.map(response => response.text())
                );
                
                principles.home = home;
                principles.srp = srp;
                principles.ocp = ocp;
                principles.lsp = lsp;
                principles.isp = isp;
                principles.dip = dip;
                
                // Display home by default after loading
                displayPrinciple('home');
            } catch (error) {
                console.error('Error loading principles:', error);
                document.getElementById('content').innerHTML = `
                    <h1>Error Loading Content</h1>
                    <p>Unable to load the documentation. Please try:</p>
                    <ul>
                        <li>Running the page through a local server (e.g. Live Server in VS Code)</li>
                        <li>Checking if all README.md files are present in their respective folders</li>
                    </ul>
                `;
            }
        }

        function displayPrinciple(principle) {
            // Update active button
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.principle === principle) {
                    btn.classList.add('active');
                }
            });

            // Display content
            const content = principles[principle];
            if (content) {
                const contentDiv = document.getElementById('content');
                contentDiv.innerHTML = marked.parse(content);
                
                // Remove any existing rendered diagrams
                document.querySelectorAll('.mermaid').forEach(el => {
                    el.removeAttribute('data-processed');
                });
                
                // Re-render mermaid diagrams
                mermaid.run({
                    querySelector: '.mermaid'
                }).catch(err => console.error('Mermaid rendering error:', err));
            } else {
                document.getElementById('content').innerHTML = '<p>Loading content...</p>';
            }
        }

        // Load principles when the page loads
        loadPrinciples();
    </script>
</body>
</html>